root {
        /* रंग पैलेट */
        --toc-color-1: #6a11cb; /* गहरा बैंगनी */
        --toc-color-2: #2575fc; /* नीला */
        --toc-color-3: #00d2ff; /* हल्का सियान */
        --toc-color-4: #ff758c; /* गुलाबी */
        --toc-color-5: #fccb45; /* पीला */
        /* टेक्स्ट और हाइलाइट */
        --toc-text-light: #ffffff;
        --toc-text-dark: #343a40; /* लिस्ट आइटम टेक्स्ट के लिए */
        --toc-text-muted: #6c757d;
        --toc-highlight-bg-start: rgba(37, 117, 252, 0.1);
        --toc-highlight-bg-end: rgba(106, 17, 203, 0.15);
        --toc-highlight-duration: 6s; /* हाइलाइट एनिमेशन अवधि */
        --toc-popup-highlight-duration: 6s; /* पॉपअप हाइलाइट के लिए अवधि (JS द्वारा उपयोग किया गया) */
        /* अन्य */
        --toc-border-radius: 12px;
        --toc-font-main: 'Roboto', sans-serif;
        --toc-font-heading: 'Poppins', sans-serif;
        --toc-sidebar-width: 20vw; --toc-sidebar-min-width: 260px; --toc-sidebar-max-width: 320px;
        --toc-button-box-max-height-initial: 150px;
        --toc-button-box-max-height-expanded: 450px;
        --toc-close-icon-hover: #e74c3c;

        /* *** लिस्ट आइटम बैकग्राउंड रंग *** */
        --toc-list-bg-h2: #e9d8fd; /* हल्का बैंगनी */
        --toc-list-bg-h3: #d6eafe; /* हल्का नीला */
        --toc-list-bg-h4: #cffafe; /* हल्का सियान */
        --toc-list-bg-h5: #ffebee; /* हल्का गुलाबी */
        --toc-list-bg-h6: #fff8e1; /* हल्का पीला/क्रीम */
    }

    body {
        font-family: var(--toc-font-main);
        color: var(--toc-text-dark);
        line-height: 1.6;
        margin: 0; /* ब्राउज़र डिफ़ॉल्ट मार्जिन हटाएँ */
        padding: 20px; /* बॉडी में थोड़ी पैडिंग जोड़ें */
        background-color: #f8f9fa; /* हल्का बैकग्राउंड रंग */
    }
    html { scroll-behavior: smooth; }

    /* --- बटन TOC कंटेनर और बटन --- */
    #toc-button-wrapper {
        margin-bottom: 30px; position: relative; border-radius: var(--toc-border-radius);
        background: #fff; box-shadow: 0 6px 20px rgba(0,0,0,0.08);
        border: 1px solid #e9ecef; overflow: hidden;
    }
    #toc-button-header {
        display: flex; justify-content: space-between; align-items: center;
        padding: 12px 20px; cursor: pointer;
        background: linear-gradient(60deg, #c94b4b, #f67280); /* लाल/गुलाबी ग्रेडिएंट */
        color: var(--toc-text-light);
    }
    #toc-button-header h3 {
        margin: 0; font-family: var(--toc-font-heading); font-size: 1.3em;
        font-weight: 600; display: flex; align-items: center; gap: 10px;
    }
    .toc-button-title-text {
        display: inline-block; padding: 6px 20px; border-radius: 40px;
        background: rgba(255, 255, 255, 0.2); color: #fff0e6;
        font-weight: 600; font-size: 0.9em; margin: 0 6px;
        box-shadow: inset 0 1px 2px rgba(0,0,0,0.1); border: 1px solid rgba(255,255,255,0.25);
    }
    #toc-button-header h3 .fa-book-open {
        color: #ffe5d9; font-size: 1.1em;
    }
    .toc-open-prompt-icon {
        font-size: 0.9em; display: inline-block;
        animation: point-right-pulse 2s infinite ease-in-out;
        color: #ffffff; margin-left: 6px;
    }
    @keyframes point-right-pulse { 0%, 100% { transform: translateX(0); opacity: 0.9; } 50% { transform: translateX(6px); opacity: 1; } }
    #toc-button-toggle-icon {
        font-size: 1.4em; transition: transform 0.35s ease; color: var(--toc-text-light);
    }
    #toc-button-wrapper.collapsed #toc-button-toggle-icon { transform: rotate(-180deg); }
    #toc-button-wrapper.expanded #toc-button-toggle-icon { transform: rotate(0deg); } /* सुनिश्चित करें कि यह वापस घूमता है */

    /* --- बटन TOC स्क्रॉलबॉक्स --- */
    #toc-button-scrollbox {
        max-height: 0; /* डिफ़ॉल्ट रूप से बंद */
        overflow-y: auto; overflow-x: hidden;
        padding: 0 20px; /* पैडिंग केवल विस्तारित होने पर लागू होगी */
        position: relative; transition: max-height 0.55s ease-in-out, padding 0.55s ease-in-out, opacity 0.4s ease-out;
        border-top: none; /* डिफ़ॉल्ट रूप से बॉर्डर नहीं */
        opacity: 0;
        background-image: radial-gradient(circle at 10% 15%, var(--toc-color-1) 1px, transparent 1px), radial-gradient(circle at 85% 25%, var(--toc-color-2) 1px, transparent 1px), radial-gradient(circle at 25% 85%, var(--toc-color-3) 1px, transparent 1px), radial-gradient(circle at 70% 70%, var(--toc-color-4) 1px, transparent 1px), radial-gradient(circle at 45% 45%, var(--toc-color-5) 1px, transparent 1px);
        background-size: 40px 40px, 50px 50px, 60px 60px, 45px 45px, 55px 55px;
        background-repeat: repeat; background-color: #ffffff;
    }
    #toc-button-wrapper.expanded #toc-button-scrollbox {
        max-height: var(--toc-button-box-max-height-expanded);
        padding: 15px 20px;
        border-top: 1px solid #e9ecef;
        opacity: 1;
        transition: max-height 0.55s ease-in-out, padding 0.55s ease-in-out, opacity 0.3s ease-in 0.1s, border-top 0s linear 0.1s; /* बॉर्डर तुरंत दिखाएँ */
    }
    #toc-button-list { list-style: none; padding: 0; margin: 0; }

    /* --- फ्लोटिंग TOC आइकन --- */
    #floating-toc-icon {
        position: fixed; top: 50%; right: 30px; transform: translateY(-50%);
        font-size: 3.2em; color: var(--toc-color-1); background: none; border: none;
        padding: 0; cursor: pointer; z-index: 999;
        transition: opacity 0.4s ease, visibility 0.4s ease, transform 0.4s ease, color 0.4s ease, right 0.4s ease;
        text-shadow: 0 0 15px rgba(106, 17, 203, 0.7);
        animation: pulse-glow-float-original 2.8s infinite ease-in-out;
        opacity: 0; visibility: hidden; /* डिफ़ॉल्ट रूप से छिपा हुआ */
    }
    #floating-toc-icon.visible { opacity: 1; visibility: visible; }
    #floating-toc-icon:hover { transform: translateY(-50%) scale(1.2) rotate(12deg); filter: brightness(1.35); }
    body.toc-sidebar-open #floating-toc-icon { right: calc( clamp(var(--toc-sidebar-min-width), var(--toc-sidebar-width), var(--toc-sidebar-max-width)) + 35px); }
    @keyframes pulse-glow-float-original { 0%, 100% { transform: translateY(-50%) scale(1); filter: drop-shadow(0 0 8px var(--toc-color-1)); color: var(--toc-color-1); } 50% { transform: translateY(-55%) scale(1.08); filter: drop-shadow(0 0 20px var(--toc-color-2)); color: var(--toc-color-2); } }

    /* --- फ्लोटिंग आइकन साइडबार --- */
    #toc-icon-sidebar {
        position: fixed; top: 0; right: 0; width: clamp(var(--toc-sidebar-min-width), var(--toc-sidebar-width), var(--toc-sidebar-max-width));
        height: 100vh; background-color: #fff; box-shadow: -10px 0 40px rgba(0, 0, 0, 0.22);
        transform: translateX(100%); transition: transform 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        z-index: 1010; display: flex; flex-direction: column; overflow: hidden;
        border-left: 5px solid; border-image: linear-gradient(180deg, var(--toc-color-1), var(--toc-color-2), var(--toc-color-3)) 1;
    }
    #toc-icon-sidebar.visible { transform: translateX(0); }
    #toc-icon-sidebar-header {
        padding: 18px 55px 18px 25px; border-bottom: 1px solid #e0e5ec; flex-shrink: 0; position: relative;
        background: linear-gradient(135deg, rgba(106,17,203,0.06), rgba(37,117,252,0.06));
    }
    #toc-icon-sidebar-header h3 {
        margin: 0; font-family: var(--toc-font-heading); font-size: 1.35em; font-weight: 700; text-align: center;
        color: var(--toc-color-1);
    }
    #toc-sidebar-internal-close {
        position: absolute; top: 50%; right: 18px; transform: translateY(-50%);
        background: none; border: none; width: 34px; height: 34px; font-size: 1.3em;
        color: #999; cursor: pointer; display: flex; justify-content: center; align-items: center;
        border-radius: 50%; transition: background-color 0.2s ease, color 0.2s ease, transform 0.3s ease;
    }
    #toc-sidebar-internal-close:hover { background-color: rgba(0,0,0,0.07); color: var(--toc-close-icon-hover); transform: translateY(-50%) rotate(180deg); }
    #toc-icon-sidebar-scrollbox {
        flex-grow: 1; overflow-y: auto; padding: 20px 15px 20px 20px; position: relative;
        background-image: linear-gradient(45deg, rgba(106,17,203,0.04) 25%, transparent 25%), linear-gradient(-45deg, rgba(37,117,252,0.04) 25%, transparent 25%), linear-gradient(45deg, transparent 75%, rgba(0,198,255,0.04) 75%), linear-gradient(-45deg, transparent 75%, rgba(255,107,107,0.04) 75%), radial-gradient(circle at center, rgba(254,202,87,0.04) 10%, transparent 11%);
        background-size: 45px 45px, 45px 45px, 45px 45px, 45px 45px, 100% 100%;
        background-position: 0 0, 0 22.5px, 22.5px -22.5px, 22.5px 0px, 0 0;
        background-color: #fdfdfe;
    }
    #toc-icon-sidebar-list { list-style: none; padding: 0 0 15vh 0; margin: 0; }

    /* --- बाहरी साइडबार क्लोज बटन --- */
    #toc-sidebar-external-close {
        position: fixed; top: 50%; left: 25px; transform: translateY(-50%);
        width: 48px; height: 48px; background: linear-gradient(135deg, var(--toc-color-4), var(--toc-color-3));
        border: none; border-radius: 50%; color: #fff; font-size: 1.6em;
        cursor: pointer; box-shadow: 0 6px 18px rgba(255, 107, 107, 0.5);
        z-index: 1011; display: flex; justify-content: center; align-items: center;
        opacity: 0; visibility: hidden; transition: all 0.4s ease;
        transform: translateY(-50%) scale(0.8);
    }
    #toc-sidebar-external-close.visible { opacity: 1; visibility: visible; transform: translateY(-50%) scale(1); }
    #toc-sidebar-external-close:hover { transform: translateY(-50%) scale(1.15) rotate(-20deg); box-shadow: 0 10px 25px rgba(255, 107, 107, 0.7); }

    /* --- साझा TOC लिस्ट आइटम स्टाइलिंग --- */
    .toc-list-item {
        margin-bottom: 9px; position: relative; border-radius: 9px; padding: 2px;
        background: linear-gradient(110deg, var(--toc-color-1), var(--toc-color-2), var(--toc-color-3), var(--toc-color-4), var(--toc-color-5));
        background-size: 400% 400%; animation: gradient-bg-animation 9s ease infinite;
        overflow: hidden; transition: box-shadow 0.3s ease;
    }
    .toc-list-item:hover { box-shadow: 0 4px 12px rgba(0,0,0,0.1); }

    .toc-list-item a {
        display: flex; align-items: flex-start; gap: 12px; padding: 13px 15px;
        text-decoration: none; border-radius: 7px; position: relative; z-index: 1;
        background-color: var(--toc-list-bg-h2); /* डिफ़ॉल्ट बैकग्राउंड (H2 का उपयोग) */
        color: var(--toc-text-dark); /* ठोस टेक्स्ट रंग */
        transition: transform 0.25s ease, background-color 0.2s ease;
    }
    .toc-list-item a:hover {
        transform: scale(1.015);
        background-color: #fff; /* होवर पर सफेद बैकग्राउंड */
    }
    /* क्लिक इफ़ेक्ट क्लास (बैकग्राउंड बदलें) */
    .toc-list-item a.toc-link-clicked {
        transform: scale(1.03);
        background-color: #eef; /* क्लिक पर हल्का नीला/बैंगनी टिंट */
        transition: transform 0.1s ease-out, background-color 0.1s ease-out;
    }

    @keyframes gradient-bg-animation { 0%{background-position:0% 50%} 50%{background-position:100% 50%} 100%{background-position:0% 50%} }

    .toc-list-item .toc-item-icon {
        margin-top: 4px; font-size: 1.1em; width: 1.3em; text-align: center; opacity: 1;
        transition: color 0.2s ease;
        color: var(--toc-color-1); /* डिफ़ॉल्ट रंग */
    }
    .toc-list-item a:hover .toc-item-icon {
         color: var(--toc-color-1); /* होवर पर रंग न बदलें */
    }
    .toc-list-item a.toc-link-clicked .toc-item-icon {
        color: var(--toc-color-1); /* क्लिक पर रंग न बदलें */
    }

    .toc-list-item .toc-item-text {
        flex-grow: 1; font-size: 1.1em; line-height: 1.65;
        font-weight: 600; font-family: var(--toc-font-main);
        white-space: normal; word-break: break-word;
    }

    /* --- पदानुक्रम स्टाइलिंग (बैकग्राउंड, आइकन रंग, पैडिंग) --- */
    .toc-list-item.level-2 { padding-left: 0; }
    .toc-list-item.level-2 a { font-weight: 700; font-size: 1.15em; background-color: var(--toc-list-bg-h2); }
    .toc-list-item.level-2 .toc-item-icon { color: var(--toc-color-1); font-size: 1.15em; }

    .toc-list-item.level-3 { padding-left: 18px; }
    .toc-list-item.level-3 a { font-weight: 600; font-size: 1.1em; background-color: var(--toc-list-bg-h3); }
    .toc-list-item.level-3 .toc-item-icon { color: var(--toc-color-2); }

    .toc-list-item.level-4 { padding-left: 36px; }
    .toc-list-item.level-4 a { font-weight: 600; font-size: 1.05em; background-color: var(--toc-list-bg-h4); }
    .toc-list-item.level-4 .toc-item-icon { color: var(--toc-color-3); }

    .toc-list-item.level-5 { padding-left: 54px; }
    .toc-list-item.level-5 a { font-weight: 600; font-size: 1.05em; background-color: var(--toc-list-bg-h5); }
    .toc-list-item.level-5 .toc-item-icon { color: var(--toc-color-4); }

    .toc-list-item.level-6 { padding-left: 72px; }
    .toc-list-item.level-6 a { font-weight: 600; font-size: 1.05em; background-color: var(--toc-list-bg-h6); }
    .toc-list-item.level-6 .toc-item-icon { color: var(--toc-color-5); }


    /* --- साझा स्क्रॉल इंडिकेटर --- */
    .toc-scroll-indicator {
        position: absolute; bottom: 10px; left: 50%; transform: translateX(-50%);
        font-size: 2.1em; opacity: 0; pointer-events: none;
        color: var(--toc-color-1);
        text-shadow: 0 0 10px var(--toc-color-3);
        animation: bounce-pulse 2s infinite ease-in-out;
        transition: opacity 0.4s ease;
    }
    .toc-scroll-indicator.visible { opacity: 1; }
    @keyframes bounce-pulse { 0%, 100% { transform: translate(-50%, 0px) scale(1); opacity: 0.7; } 50% { transform: translate(-50%, -10px) scale(1.1); opacity: 1; } }

    /* कस्टम स्क्रॉलबार */
    #toc-button-scrollbox::-webkit-scrollbar, #toc-icon-sidebar-scrollbox::-webkit-scrollbar { width: 6px; }
    #toc-button-scrollbox::-webkit-scrollbar-track, #toc-icon-sidebar-scrollbox::-webkit-scrollbar-track { background: rgba(0,0,0,0.04); border-radius: 3px; }
    #toc-button-scrollbox::-webkit-scrollbar-thumb, #toc-icon-sidebar-scrollbox::-webkit-scrollbar-thumb { background: linear-gradient(180deg, var(--toc-color-2), var(--toc-color-3)); border-radius: 3px; }
    /* Firefox के लिए स्क्रॉलबार स्टाइल (वैकल्पिक) */
    #toc-button-scrollbox, #toc-icon-sidebar-scrollbox { scrollbar-width: thin; scrollbar-color: var(--toc-color-2) rgba(0,0,0,0.04); }


    /* --- कंटेंट हाइलाइटिंग --- */
    @keyframes zoom-in-effect { 0% { transform: scale(0.98); opacity: 0.9; } 50% { transform: scale(1.02); opacity: 1; } 100% { transform: scale(1); opacity: 1; } }
    .toc-target-heading {
        position: relative; color: var(--toc-color-3) !important;
        animation: zoom-in-effect 0.6s ease-out forwards;
        padding: 5px 0; border-bottom: 3px solid transparent; transition: color 0.3s ease;
        text-shadow: 0 0 8px rgba(0, 210, 255, 0.5);
    }
    /* बॉर्डर एनिमेशन */
    .toc-target-heading::after { content: ''; position: absolute; left: 0; bottom: -2px; width: 100%; height: 3px; background: linear-gradient(90deg, var(--toc-color-2), var(--toc-color-1), var(--toc-color-3), var(--toc-color-2)); background-size: 200% 100%; animation: gradient-bg-animation 2.5s linear infinite; border-radius: 2px; transition: opacity 0.5s ease var(--toc-popup-highlight-duration); opacity: 1; }
    .toc-target-heading.fading-out::after { opacity: 0; }
    .toc-target-heading.fading-out { color: var(--toc-text-dark) !important; background: none; animation: none; text-shadow: none; transform: scale(1); }
    /* पैराग्राफ एनिमेशन */
    @keyframes pulse-background-alt { 0% { background-color: var(--toc-highlight-bg-start); box-shadow: 0 4px 15px rgba(37, 117, 252, 0.1); } 50% { background-color: var(--toc-highlight-bg-end); box-shadow: 0 6px 25px rgba(106, 17, 203, 0.18); } 100% { background-color: var(--toc-highlight-bg-start); box-shadow: 0 4px 15px rgba(37, 117, 252, 0.1); } }
    .toc-target-paragraph {
        padding: 20px; margin-left: -20px; margin-right: -20px; border-radius: var(--toc-border-radius);
        animation: pulse-background-alt 2.8s ease-in-out infinite;
        transition: background-color 0.5s ease, box-shadow 0.5s ease, padding 0.5s ease, margin 0.5s ease;
        transition-delay: calc(var(--toc-popup-highlight-duration) - 0.5s); /* फेड-आउट शुरू होने से ठीक पहले ट्रांज़िशन करें */
    }
    .toc-target-paragraph.fading-out {
        background-color: transparent !important; /* !important जोड़ें */
        box-shadow: none !important; /* !important जोड़ें */
        padding: 0; margin: 0; animation: none;
    }


    /* --- Responsive --- */
    @media (max-width: 768px) {
        :root { --toc-sidebar-width: 75vw; --toc-sidebar-min-width: 250px; --toc-sidebar-max-width: 310px;}
        #floating-toc-icon { font-size: 2.8em; right: 20px; }
        body.toc-sidebar-open #floating-toc-icon { right: calc( clamp(var(--toc-sidebar-min-width), var(--toc-sidebar-width), var(--toc-sidebar-max-width)) + 25px); }
        #toc-sidebar-external-close { width: 42px; height: 42px; font-size: 1.4em; left: 18px; }
        #toc-button-header h3 { font-size: 1.2em; }
        .toc-button-title-text { padding: 5px 16px; font-size: 0.88em; }
        #toc-icon-sidebar-header h3 { font-size: 1.25em; }
        #toc-icon-sidebar { width: clamp(var(--toc-sidebar-min-width), var(--toc-sidebar-width), var(--toc-sidebar-max-width)); } /* क्लैंप का उपयोग करें */
        .toc-list-item a { padding: 11px 13px; }
        .toc-list-item .toc-item-text { font-size: 1.05em; }
        .toc-list-item.level-3, .toc-list-item.level-4, .toc-list-item.level-5, .toc-list-item.level-6 { padding-left: 15px; } /* मोबाइल पर इंडेंटेशन कम करें */
        .toc-target-paragraph { padding: 15px; margin-left: -15px; margin-right: -15px; }
    }

    /* एक्सेसिबिलिटी: कम मोशन प्राथमिकता */
    @media (prefers-reduced-motion: reduce) {
      /* सामान्य ट्रांजिशन/एनिमेशन बंद करें */
      *, *::before, *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
        scroll-behavior: auto !important;
        transition-delay: 0ms !important;
      }

      /* विशिष्ट एनिमेशन/ट्रांज़िशन बंद करें */
      .toc-open-prompt-icon,
      #floating-toc-icon,
      .toc-list-item, /* Gradient animation */
      .toc-target-heading,
      .toc-target-heading::after,
      .toc-target-paragraph,
      .toc-scroll-indicator,
      #toc-sidebar-internal-close,
      #toc-sidebar-external-close,
      .toc-list-item a {
        animation: none !important;
        transition: none !important; /* Ensure transitions are also off */
      }

       /* कार्यात्मकता के लिए आवश्यक ट्रांज़िशन/ट्रांसफ़ॉर्म रखें */
       #toc-button-toggle-icon { transition: transform 0.01ms !important; } /* स्टिल रोटेट */
       #toc-button-wrapper.collapsed #toc-button-toggle-icon { transform: rotate(-180deg); }
       #toc-button-wrapper.expanded #toc-button-toggle-icon { transform: rotate(0deg); }

       #toc-button-scrollbox { transition: max-height 0.01ms, padding 0.01ms, opacity 0.01ms !important; }
       #toc-icon-sidebar { transition: transform 0.01ms !important; }
       #toc-sidebar-external-close { transition: opacity 0.01ms, visibility 0.01ms, transform 0.01ms !important; }

       /* होवर/क्लिक पर सूक्ष्म परिवर्तन रखें */
       #toc-button-header:hover { background-color: #c0392b; } /* ग्रेडिएंट के बजाय ठोस रंग */
       .toc-list-item a:hover {
          transform: none; /* स्केल हटाएँ */
          background-color: #f8f9fa; /* थोड़ा अलग होवर बैकग्राउंड */
       }
       .toc-list-item a.toc-link-clicked {
          transform: none; /* स्केल हटाएँ */
          background-color: #eef; /* क्लिक बैकग्राउंड रखें */
       }
       #toc-sidebar-internal-close:hover {
           background-color: rgba(0,0,0,0.07);
           color: var(--toc-close-icon-hover);
           transform: translateY(-50%); /* रोटेशन हटाएँ */
       }
       #toc-sidebar-external-close:hover {
           transform: translateY(-50%) scale(1.05); /* स्केल कम करें, रोटेशन हटाएँ */
           box-shadow: 0 8px 20px rgba(255, 107, 107, 0.6);
       }
       #floating-toc-icon:hover {
           transform: translateY(-50%); /* स्केल/रोटेशन हटाएँ */
           filter: brightness(1.1); /* हल्की चमक */
       }
    }
